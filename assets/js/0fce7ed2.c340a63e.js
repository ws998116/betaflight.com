"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5116],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(a),m=r,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return a?n.createElement(h,i(i({ref:t},u),{},{components:a})):n.createElement(h,i({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},61254:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const o={},i=void 0,l={unversionedId:"archive/FPV-Camera-Control-(Joystick-Emulation)",id:"archive/FPV-Camera-Control-(Joystick-Emulation)",title:"FPV-Camera-Control-(Joystick-Emulation)",description:"Description",source:"@site/docs/archive/FPV-Camera-Control-(Joystick-Emulation).md",sourceDirName:"archive",slug:"/archive/FPV-Camera-Control-(Joystick-Emulation)",permalink:"/docs/archive/FPV-Camera-Control-(Joystick-Emulation)",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"FAQ",permalink:"/docs/archive/FAQ"},next:{title:"Failsafe-(Flight-Controller)",permalink:"/docs/archive/Failsafe-(Flight-Controller)"}},s={},c=[{value:"Description",id:"description",level:2},{value:"Setting up",id:"setting-up",level:2},{value:"Modes of operation",id:"modes-of-operation",level:2},{value:"Hardware PWM",id:"hardware-pwm",level:3},{value:"How do I select a suitable <code>PIN</code>?",id:"how-do-i-select-a-suitable-pin",level:4},{value:"Software PWM",id:"software-pwm",level:3},{value:"DAC",id:"dac",level:3},{value:"Accessibility",id:"accessibility",level:2},{value:"Stick Commands",id:"stick-commands",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Key Delay",id:"key-delay",level:3},{value:"Reference Voltage",id:"reference-voltage",level:3},{value:"Internal Resistance",id:"internal-resistance",level:3},{value:"Keypad Button Resistance Values",id:"keypad-button-resistance-values",level:3},{value:"Example FC configurations",id:"example-fc-configurations",level:2},{value:"Emax Magnum stack + Foxeer Arrow v3",id:"emax-magnum-stack--foxeer-arrow-v3",level:3},{value:"Foxeer Arrow Mini, Arrow Micro, Monster",id:"foxeer-arrow-mini-arrow-micro-monster",level:3},{value:"Foxeer Predator",id:"foxeer-predator",level:3},{value:"Caddx.us Micro Turbo S1",id:"caddxus-micro-turbo-s1",level:3},{value:"Caddx.us Micro Turbo F1",id:"caddxus-micro-turbo-f1",level:3},{value:"Caddx.us Turtle V2",id:"caddxus-turtle-v2",level:3},{value:"Frequently asked questions",id:"frequently-asked-questions",level:2},{value:"Tips for hardware designers",id:"tips-for-hardware-designers",level:2}],u={toc:c};function p(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"description"},"Description"),(0,r.kt)("p",null,"This functionality provides OSD joystick emulation for HS1177-style cameras, e.g. cameras having a single OSD input pin driven by a button resistor divider.\nMost cameras up to date seem to adhere to the design and have the following resistor nominals:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"47 k\u03a9 - camera internal resistor, 9.9 k\u03a9 for RunCam Sparrow, Foxeer Monster and probably other HS1190 cameras (thanks to @khalinatek)"),(0,r.kt)("li",{parentName:"ul"},"45 k\u03a9 - enter"),(0,r.kt)("li",{parentName:"ul"},"27 k\u03a9 - left"),(0,r.kt)("li",{parentName:"ul"},"15 k\u03a9 - up"),(0,r.kt)("li",{parentName:"ul"},"6.8 k\u03a9 - right"),(0,r.kt)("li",{parentName:"ul"},"0 - down")),(0,r.kt)("h2",{id:"setting-up"},"Setting up"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"resource camera_control PIN")," - allows you to designate a ",(0,r.kt)("inlineCode",{parentName:"li"},"PIN")," for camera control functionality. The list of suitable pins depends on the way you're going to wire your camera to the FC."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"set camera_control_mode = hardware_pwm")," - mode of operation, ",(0,r.kt)("inlineCode",{parentName:"li"},"software_pwm")," is the least restrictive in terms of available PIN selection, but it requires both a resistor and a capacitor to work properly; ",(0,r.kt)("inlineCode",{parentName:"li"},"hardware_pwm")," is almost guaranteed to work with just a resistor given you can spare a timer for it; ",(0,r.kt)("inlineCode",{parentName:"li"},"dac")," (not yet implemented) is going to be supported on the very few FCs that have a DAC pin broken out and unoccupied by other functions, and is going to work by direct connection to the camera once implemented."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"set camera_control_ref_voltage = 330")," - voltage (in 10 mV steps) measured across your camera's floating ",(0,r.kt)("inlineCode",{parentName:"li"},"OSD")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"GND")," pins, usually 3V3, but not guaranteed, e.g. my RunCam Sky has 3V4, and some cameras have reportedly have as low as 3V1."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"set camera_control_key_delay = 180")," - the duration of each key press (in ms presence at the ",(0,r.kt)("inlineCode",{parentName:"li"},"camera_control")," pin, after consulting with RunCam it was set to 180 ms to accommodate most cameras, while some of them accept as low as 125 ms."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"set camera_control_internal_resistance = 470")," - the internal resistance (in 100 \u03a9 steps) of your camera, most HS1177 derivatives have 47 k\u03a9, but that's not guaranteed. You'll have to derive this value for your camera in case the default one doesn't work."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"camera_control_button_resistance = 450,270,150,68,0")," - sets the emulated resistance for each button on the equivalent button keypad for the camera. The default values should work for most cameras but in some cases the manufacturer may have unusual values. if you have problems (like one button won't work) then measure the actual resistance generated in the keypad that came with the camera and adjust. The button value ordering is: ",(0,r.kt)("inlineCode",{parentName:"li"},"ENTER"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"LEFT"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"UP"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"RIGHT"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"DOWN"),". ",(0,r.kt)("strong",{parentName:"li"},"Added in Betaflight 4.1"),".")),(0,r.kt)("h2",{id:"modes-of-operation"},"Modes of operation"),(0,r.kt)("h3",{id:"hardware-pwm"},"Hardware PWM"),(0,r.kt)("p",null,"Requires a 150-600 \u03a9 resistor inline from your FC ",(0,r.kt)("inlineCode",{parentName:"p"},"PIN")," to Camera ",(0,r.kt)("inlineCode",{parentName:"p"},"OSD"),". This is built into some Additional ",(0,r.kt)("inlineCode",{parentName:"p"},"GND")," connection is advised."),(0,r.kt)("p",null,"Assumes that the camera (or FC) has sufficient capacitance at OSD pin (look at ",(0,r.kt)("inlineCode",{parentName:"p"},"Tips for hardware designers")," section). If you camera is not working, try adding a capacitor between camera ",(0,r.kt)("inlineCode",{parentName:"p"},"OSD")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"GND"),"."),(0,r.kt)("h4",{id:"how-do-i-select-a-suitable-pin"},"How do I select a suitable ",(0,r.kt)("inlineCode",{parentName:"h4"},"PIN"),"?"),(0,r.kt)("p",null,"A pin with a hardware timer output is required to use the hardware PWM mode. Some FCs have a dedicated ",(0,r.kt)("inlineCode",{parentName:"p"},"CC")," pin, which is preferable, as it usually already has the resistor in series, otherwise LED strip output or unused motor outputs (M5/M6) are a fairly safe bet. To check if a pin has a timer output, first find out what pin on the microcontroller the FC pin is wired to. This can be done using the ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," command, example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# resource\nresource BEEPER 1 D02\nresource MOTOR 1 B04\nresource MOTOR 2 B00\nresource MOTOR 3 B05\nresource MOTOR 4 B01\nresource MOTOR 5 D12\nresource MOTOR 6 D13\nresource MOTOR 7 C08\nresource MOTOR 8 C09\n...\nresource SERIAL_RX 4 A01\n")),(0,r.kt)("p",null,"In this case, if you for example wanted to use the unused M5 output on a quadcopter, the pin to use is ",(0,r.kt)("inlineCode",{parentName:"p"},"D12"),". Check if the pin has a timer using the ",(0,r.kt)("inlineCode",{parentName:"p"},"timer")," command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# timer\ntimer A08 AF1\n# pin A08: TIM1 CH1 (AF1)\ntimer B03 AF1\n# pin B03: TIM2 CH2 (AF1)\ntimer B00 AF2\n# pin B00: TIM3 CH3 (AF2)\ntimer B01 AF2\n# pin B01: TIM3 CH4 (AF2)\ntimer B04 AF2\n# pin B04: TIM3 CH1 (AF2)\ntimer B05 AF2\n# pin B05: TIM3 CH2 (AF2)\ntimer D12 AF2\n# pin D12: TIM4 CH1 (AF2)\ntimer D13 AF2\n# pin D13: TIM4 CH2 (AF2)\ntimer C08 AF3\n# pin C08: TIM8 CH3 (AF3)\ntimer C09 AF3\n# pin C09: TIM8 CH4 (AF3)\n")),(0,r.kt)("p",null,"We have a timer (",(0,r.kt)("inlineCode",{parentName:"p"},"TIM4"),") which is not used for anything else (the other pin, ",(0,r.kt)("inlineCode",{parentName:"p"},"D13"),", is the M6 output, which we're not using)."),(0,r.kt)("p",null,"Unmap the motor output pin, map the camera pin:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"resource MOTOR 5 none\nresource CAMERA_CONTROL 1 D12\n")),(0,r.kt)("p",null,"And that's it, your pin should now be configured."),(0,r.kt)("p",null,"In case you want to use a pin that doesn't have a timer set up by default, you can check the available timers by using the ",(0,r.kt)("inlineCode",{parentName:"p"},"timer")," command again. In this example, let's check if we can remap the rx pin from serial 4, which is on ",(0,r.kt)("inlineCode",{parentName:"p"},"A01")," in this example. As it wasn't listed in the list of configured timers, let's see if the pin can function as a timer output using ",(0,r.kt)("inlineCode",{parentName:"p"},"timer a01 list"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# timer a01 list\n# AF1: TIM2 CH2\n# AF2: TIM5 CH2\n")),(0,r.kt)("p",null,"In this case, ",(0,r.kt)("inlineCode",{parentName:"p"},"TIM2")," is already in use for pin ",(0,r.kt)("inlineCode",{parentName:"p"},"B03"),", but ",(0,r.kt)("inlineCode",{parentName:"p"},"TIM5")," isn't in use anywhere. Enable the AF (alternate function) using ",(0,r.kt)("inlineCode",{parentName:"p"},"timer A01 AF2"),", and you should be able to remap the pins."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"timer A01 AF2\nresource SERIAL_RX 4 none\nresource CAMERA_CONTROL 1 A01\n")),(0,r.kt)("h3",{id:"software-pwm"},"Software PWM"),(0,r.kt)("p",null,"Requires a 150-600 \u03a9 resistor and a 1-10 \xb5F capacitor, forming an RC-filter. Resistor goes from ",(0,r.kt)("inlineCode",{parentName:"p"},"PIN")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"OSD"),", while the capacitor should be connected between ",(0,r.kt)("inlineCode",{parentName:"p"},"OSD")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"GND"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://betaflight.com/assets/img/camera-control-software-pwm.svg",alt:"Resistor and capacitor schematic"})),(0,r.kt)("h3",{id:"dac"},"DAC"),(0,r.kt)("p",null,"(Does not work, not implemented yet!)"),(0,r.kt)("p",null,"Will require no additional components, wire your ",(0,r.kt)("inlineCode",{parentName:"p"},"PIN")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"OSD"),", preferably with a ",(0,r.kt)("inlineCode",{parentName:"p"},"GND")," connection as well."),(0,r.kt)("h2",{id:"accessibility"},"Accessibility"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"RC Stick Commands"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"MSP_CAMERA_CONTROL")),(0,r.kt)("li",{parentName:"ul"},"MSP over Telemetry, e.g. Lua scripts for FrSky radios (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/betaflight/betaflight-tx-lua-scripts/pull/23"},"Pull Request #23"),")")),(0,r.kt)("h2",{id:"stick-commands"},"Stick Commands"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://betaflight.com/assets/img/camera-control-stick-commands.png",alt:"Camera Control Stick Commands"})),(0,r.kt)("p",null,'Some cameras have a secondary OSD menu (for example the RunCam Eagle Pro 2) that allows setting things like voltage monitor, timers, display name, etc. This menu can be accessed as well, but you\'ll need to determine the appropriate stick commands based on the manual provided with the camera. The stick position will be equivalent to whatever button sequence the camera requires. So for example if the camera requires holding "down" button to enter the menu, this would correspond to holding the pitch stick "down" while entering camera control with the normal left stick throttle centered and yaw right. The point is that the roll/pitch stick corresponds to the up/down/left/right buttons and the throttle centered/yaw right corresponds to the "enter" button on the camera\'s control keypad or joystick.'),(0,r.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,r.kt)("p",null,"First of all, make sure ",(0,r.kt)("inlineCode",{parentName:"p"},"resource list")," CLI command lists ",(0,r.kt)("inlineCode",{parentName:"p"},"camera_control")," as allocated."),(0,r.kt)("p",null,"If your camera doesn't work, chances are you have to adjust values for key delay, reference voltage or internal resistance.\nDefaults work fine for most HS1177-derivatives, if you have issues, try changing the key delay value first."),(0,r.kt)("h3",{id:"key-delay"},"Key Delay"),(0,r.kt)("p",null,"If you have multi-click occurrences, decrease the delay by 10-15%, if your clicks don't register consistently - try increasing it instead.\nFoxeer Arrow v3 is known to work best with delay of 125 ms."),(0,r.kt)("h3",{id:"reference-voltage"},"Reference Voltage"),(0,r.kt)("p",null,"Just measure the voltage between OSD and GND pins on the camera while it is powered."),(0,r.kt)("h3",{id:"internal-resistance"},"Internal Resistance"),(0,r.kt)("p",null,"Foxeer Monster, RunCam Micro Sparrow (and probably other cameras I haven't yet discovered) are known to require ",(0,r.kt)("inlineCode",{parentName:"p"},"camera_control_internal_resistance = 99"),".\nRunCam Phoenix 2 Nano requires ",(0,r.kt)("inlineCode",{parentName:"p"},"camera_control_internal_resistance = 212"),"."),(0,r.kt)("p",null,"To derive this value for an unknown camera, you'll need a multimeter and a suitable joystick. First set your multimeter to resistance measurement mode and measure the resistance of your OSD joystick while pressing individuals keys, write the values down somewhere, you'll need them later."),(0,r.kt)("p",null,"Now you'll have to power your camera, connect the OSD joystick to it and find a way to measure the OSD-pin voltage while pressing individual keys on joystick, measuring voltages for all keys is not necessary, one or two is sufficient. Also measure the ",(0,r.kt)("inlineCode",{parentName:"p"},"Reference Voltage")," if you haven't yet."),(0,r.kt)("p",null,"You'll end up with a set of resistance and voltage values for each key. To find internal resistance value, plug in your values into this formula:\n",(0,r.kt)("inlineCode",{parentName:"p"},"Rin = Rkey * (Vref / Vkey - 1) where key in (enter, left, up, right, down)")),(0,r.kt)("p",null,"Calculate this value for a few keys as a sanity check, the resulting values should be roughly the same. The ",(0,r.kt)("inlineCode",{parentName:"p"},"Rin")," you've arrived at is your ",(0,r.kt)("inlineCode",{parentName:"p"},"camera_control_internal_resistance")," value, keep in mind it is measured in 100 \u03a9 steps, hence divide your value by 100."),(0,r.kt)("h3",{id:"keypad-button-resistance-values"},"Keypad Button Resistance Values"),(0,r.kt)("p",null,"Most cameras use standard resistance values for the keypad buttons, but some can have unusual values. If you have a problem with most of the buttons working but one or two not, try measuring and adjusting the ",(0,r.kt)("inlineCode",{parentName:"p"},"camera_control_button_resistance")," values (",(0,r.kt)("strong",{parentName:"p"},"added in Betaflight 4.1"),")."),(0,r.kt)("h2",{id:"example-fc-configurations"},"Example FC configurations"),(0,r.kt)("h3",{id:"emax-magnum-stack--foxeer-arrow-v3"},"Emax Magnum stack + Foxeer Arrow v3"),(0,r.kt)("p",null,"600 \u03a9 resistor in line\nCamera control Mapped to Motor 6 output\nset camera_control_key_delay = 125"),(0,r.kt)("p",null,"Use following CLI Commands"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"resource MOTOR 6 none\nresource CAMERA_CONTROL A08\nset camera_control_key_delay = 125\nsave\n")),(0,r.kt)("h3",{id:"foxeer-arrow-mini-arrow-micro-monster"},"Foxeer Arrow Mini, Arrow Micro, Monster"),(0,r.kt)("p",null,"These cameras have insufficient to no capacitance on OSD pin, as a result you'll have to add at least 0.1 \xb5F to get Hardware PWM working. Foxeer may release a new revision which will address this problem."),(0,r.kt)("p",null,"1206 capacitors work perfectly while soldering directly to JST connector backside, here's an illustration of a 100 nF 1206 capacitor soldered onto an Arrow Micro v2, but it also works for Arrow Mini as they share PCB design:\n",(0,r.kt)("img",{parentName:"p",src:"https://betaflight.com/assets/img/camera-control-foxeer-arrow-micro-mod.png",alt:"Foxeer Arrow Micro v2 modified for camera control"})),(0,r.kt)("p",null,"A similar trick works for Foxeer Monster.\n@todo add a photo"),(0,r.kt)("h3",{id:"foxeer-predator"},"Foxeer Predator"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"UP&DOWN do not work"),", hopefully future batches will have the firmware flaw addressed.\n",(0,r.kt)("inlineCode",{parentName:"p"},"set camera_control_internal_resistance = 99")),(0,r.kt)("p",null,"Predator expects a really low value for DOWN, while the FC can't output lower than ",(0,r.kt)("inlineCode",{parentName:"p"},"3.3 * R / (R + 9.9 k\u03a9)"),".\nUse a resistor of 75-150 \u03a9 to make it work."),(0,r.kt)("p",null,"Reference voltage for my samples seems to be on the higher side, staying at 3.43 V for a 3S battery, which leads to the problem with UP.\nThis camera seems to register UP key with a logic like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"if voltage is V_up:\n  time_start = now\n  while (voltage is not V_max): wait\n  time_end = now\n  total_time = time_end - time_start\n\n  if total_time is short: UP\n  else: LONG_UP\n")),(0,r.kt)("p",null,"It results in the camera getting stuck in an infinite loop, ",(0,r.kt)("strong",{parentName:"p"},"even the OSD timer stops counting"),", as the FC can never output ",(0,r.kt)("inlineCode",{parentName:"p"},"Vmax ~= 3.4"),"."),(0,r.kt)("p",null,"Foxeer Predator v4 Mini measured internal resistance 47k\u03a9, reference voltage 3.27V, OSD joystick button resistances are standard (on the top of this article)"),(0,r.kt)("h3",{id:"caddxus-micro-turbo-s1"},"Caddx.us Micro Turbo S1"),(0,r.kt)("p",null,"Works perfectly on the default settings, no capacitor required."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"set camera_control_internal_resistance = 470\nset camera_control_ref_voltage = 325\n")),(0,r.kt)("h3",{id:"caddxus-micro-turbo-f1"},"Caddx.us Micro Turbo F1"),(0,r.kt)("p",null,"This camera has usually low reference voltage, at least no sample, running up a 4S battery it showed 2.77 V, works perfectly otherwise. No capacitor required."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"set camera_control_internal_resistance = 470\nset camera_control_ref_voltage = 277\n")),(0,r.kt)("h3",{id:"caddxus-turtle-v2"},"Caddx.us Turtle V2"),(0,r.kt)("p",null,"Based on the values measured with the procedure mentioned above. Found the button resistance values to be consistently above the default."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"set camera_control_internal_resistance = 99\nset camera_control_ref_voltage = 300\nset camera_control_button_resistance = 460,280,160,78,10\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Please follow manufacturers guidelines from the bottom of this page to avoid such problems!")),(0,r.kt)("h2",{id:"frequently-asked-questions"},"Frequently asked questions"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Which resistor value is best?")),(0,r.kt)("p",null,"Any resistor from the 150-600 \u03a9 will do, with preference to lower values."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Which resistor power rating is required?")),(0,r.kt)("p",null,"Irrelevant"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"RCG Discussion Thread")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.rcgroups.com/forums/showthread.php?2961216-Betaflight-Camera-Control-Compatibility-Reports"},"https://www.rcgroups.com/forums/showthread.php?2961216-Betaflight-Camera-Control-Compatibility-Reports")),(0,r.kt)("p",null,"Read this thread for help on compatibility."),(0,r.kt)("h2",{id:"tips-for-hardware-designers"},"Tips for hardware designers"),(0,r.kt)("p",null,"If you're designing a flight controller, select an MCU pin which you'll be able to provide a dedicated timer for.\nTo add your camera control pin to default target resources assignment, use the following preprocessor macro in ",(0,r.kt)("inlineCode",{parentName:"p"},"target.h")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"#define CAMERA_CONTROL_PIN pin_name\n")),(0,r.kt)("p",null,"Use 150-220 \u03a9 resistor inline between designated MCU pin and the solder pad.\nConsider adding some additional capacitance to support the widest variety of cameras, a 100 nF ceramic SMD capacitor would be sufficient, anything in the range of 100-500 nF will increase user experience greatly."),(0,r.kt)("p",null,"If you're designing a camera, the same advice about capacitance applies. It provides debouncing for the physical joystick and simplifies FC configuration for the end user.\nHaving control over camera firmware, make it less restrictive in terms of ",(0,r.kt)("em",{parentName:"p"},"key")," voltage levels with some 5-10% of margin from both sides."))}p.isMDXComponent=!0}}]);