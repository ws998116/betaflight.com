"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9080],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>h});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),p=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(r),c=n,h=d["".concat(s,".").concat(c)]||d[c]||m[c]||o;return r?a.createElement(h,i(i({ref:t},u),{},{components:r})):a.createElement(h,i({ref:t},u))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:n,i[1]=l;for(var p=2;p<o;p++)i[p]=r[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},5279:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=r(87462),n=(r(67294),r(3905));const o={},i="AIO Betaflight F3 Flight controller",l={unversionedId:"development/boards/BETAFLIGHTF3",id:"development/boards/BETAFLIGHTF3",title:"AIO Betaflight F3 Flight controller",description:"Updates",source:"@site/docs/development/boards/BETAFLIGHTF3.md",sourceDirName:"development/boards",slug:"/development/boards/BETAFLIGHTF3",permalink:"/docs/development/boards/BETAFLIGHTF3",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"development",previous:{title:"BeeRotor F4",permalink:"/docs/development/boards/BEEROTORF4"},next:{title:"BLUEJAYF4",permalink:"/docs/development/boards/BLUEJAYF4"}},s={},p=[{value:"Updates",id:"updates",level:2},{value:"Timer mapping is modified (3.2) 2017-07-16",id:"timer-mapping-is-modified-32-2017-07-16",level:3},{value:"Description",id:"description",level:2},{value:"MCU, Sensors and Features",id:"mcu-sensors-and-features",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Features",id:"features",level:3},{value:"Manufacturers and Distributors",id:"manufacturers-and-distributors",level:2},{value:"Designers",id:"designers",level:2},{value:"Maintainers",id:"maintainers",level:2},{value:"Similar Targets",id:"similar-targets",level:2},{value:"Variants",id:"variants",level:2},{value:"FAQ &amp; Known Issues",id:"faq--known-issues",level:2},{value:"Other Resources",id:"other-resources",level:2},{value:"Issue fixes",id:"issue-fixes",level:2},{value:"SD card:",id:"sd-card",level:3},{value:"Current sensor:",id:"current-sensor",level:3},{value:"Driver related problems",id:"driver-related-problems",level:3},{value:"remapping for motors",id:"remapping-for-motors",level:3},{value:"Setup Guide:",id:"setup-guide",level:2},{value:"Image",id:"image",level:2}],u={toc:p};function d(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"aio-betaflight-f3-flight-controller"},"AIO Betaflight F3 Flight controller"),(0,n.kt)("h2",{id:"updates"},"Updates"),(0,n.kt)("h3",{id:"timer-mapping-is-modified-32-2017-07-16"},"Timer mapping is modified (3.2) 2017-07-16"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Software serial no longer interfere with motors 1-4."),(0,n.kt)("li",{parentName:"ul"},"Software serial pads/TH can be used for motors 5-6 (dshot enabled; hexa-dshot)."),(0,n.kt)("li",{parentName:"ul"},"In the hexa-dshot configuration, LED strip has DMA conflict with motor 5. Use of other timer resource, presumably PPM, is advised.")),(0,n.kt)("h2",{id:"description"},"Description"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"OSD + PDB + SD card adapter")),(0,n.kt)("h2",{id:"mcu-sensors-and-features"},"MCU, Sensors and Features"),(0,n.kt)("h3",{id:"hardware"},"Hardware"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"(Fill in hardware specs and add any not listed)")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"MCU: STM32F303CCT6"),(0,n.kt)("li",{parentName:"ul"},"IMU: MPU-6000"),(0,n.kt)("li",{parentName:"ul"},"IMU Interrupt:"),(0,n.kt)("li",{parentName:"ul"},"BARO: no"),(0,n.kt)("li",{parentName:"ul"},"USB: STM32 VCP"),(0,n.kt)("li",{parentName:"ul"},"Hardware UARTS: 3"),(0,n.kt)("li",{parentName:"ul"},"OSD: uses a AB7456 chip"),(0,n.kt)("li",{parentName:"ul"},"Blackbox: SD Card"),(0,n.kt)("li",{parentName:"ul"},"PPM/UART Shared:"),(0,n.kt)("li",{parentName:"ul"},"Battery Voltage Sensor: Yes"),(0,n.kt)("li",{parentName:"ul"},"Current sensor: 0.5 mOhm"),(0,n.kt)("li",{parentName:"ul"},"Integrated Voltage Regulator: 3A, 5V or 3V for RX and VBAT or 5V for VTX/camera with filtered AGND"),(0,n.kt)("li",{parentName:"ul"},"Buttons: BOOT button"),(0,n.kt)("li",{parentName:"ul"},"Software Serial broken out"),(0,n.kt)("li",{parentName:"ul"},"Weight: 5.4 grams")),(0,n.kt)("h3",{id:"features"},"Features"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"(add list of features)")),(0,n.kt)("h2",{id:"manufacturers-and-distributors"},"Manufacturers and Distributors"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"http://www.fpvmodel.com/-pre-order-betaflight-f3-flight-controller_g1231.html"},"http://www.fpvmodel.com/-pre-order-betaflight-f3-flight-controller_g1231.html"),"\n",(0,n.kt)("a",{parentName:"p",href:"https://strictlyracingdrones.com/shop/electronics/betaflightf3-flight-controller/"},"https://strictlyracingdrones.com/shop/electronics/betaflightf3-flight-controller/")),(0,n.kt)("h2",{id:"designers"},"Designers"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"FPVModel"),(0,n.kt)("li",{parentName:"ul"},"Boris B")),(0,n.kt)("h2",{id:"maintainers"},"Maintainers"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"(add your name here if you help test or contribute code for this board)")),(0,n.kt)("h2",{id:"similar-targets"},"Similar Targets"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"(add links board descriptions here that are similar in features or function, but have a separate target)")),(0,n.kt)("h2",{id:"variants"},"Variants"),(0,n.kt)("h2",{id:"faq--known-issues"},"FAQ & Known Issues"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"(add FAQs, known issues and workarounds specifically related to this board. please link work in progress issues to the related github issue or pull request)")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"format is reporter ","[name]",", (status): issue contents")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The DSM2/SBUS pad is connected to RX2"),(0,n.kt)("li",{parentName:"ul"},"LED_STRIP conflicts with motor 2 in Betaflight 3.1.0. Upgrade to version 3.1.6+ to fix it."),(0,n.kt)("li",{parentName:"ul"},"The ground plane acts as a heatsink, making the ground (-) pads difficult to solder to. Preheat the area you're working on with a hot air station at 100\xb0C - 150\xb0C (200\xb0F - 300\xb0F) to make soldering faster and easier"),(0,n.kt)("li",{parentName:"ul"},"SD card needs to be formatted to specific parameters"),(0,n.kt)("li",{parentName:"ul"},"Current sensor needs to be calibrated in BF software"),(0,n.kt)("li",{parentName:"ul"},"Filtered power rail(RAM) is weak"),(0,n.kt)("li",{parentName:"ul"},"osd and 16/9 cameras do produce flickers in the osd"),(0,n.kt)("li",{parentName:"ul"},"USB 5V power is connected to main 5V rail. If you have a lot of devices connected, e.g. buzzer, LED strip, Rx etc, USB might shut down. Power up on battery before connecting to USB in such cases."),(0,n.kt)("li",{parentName:"ul"},"Status LED is inverted and connected in parallel with the beeper (PC15). So the light is on when beeper is quiet, and visa verse. A bit odd.")),(0,n.kt)("h2",{id:"other-resources"},"Other Resources"),(0,n.kt)("h2",{id:"issue-fixes"},"Issue fixes"),(0,n.kt)("h3",{id:"sd-card"},"SD card:"),(0,n.kt)("p",null,"Samsung Evo class 10 series, 16GB or 32GB seem to work better than others\n(this may or may not work)"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Format card in SDcardformatter v4"),(0,n.kt)("li",{parentName:"ol"},"Insert card, flash BF 3.1.3 (on usb only no extra power)"),(0,n.kt)("li",{parentName:"ol"},"Straight to CLI and set sdcard_dma=on"),(0,n.kt)("li",{parentName:"ol"},"Card should initialize and the icon in the blackbox tab under the BF GUI should show it green"),(0,n.kt)("li",{parentName:"ol"},"back to CLI and set sdcard_dma=off")),(0,n.kt)("h3",{id:"current-sensor"},"Current sensor:"),(0,n.kt)("p",null,"There is a resistor that can be measured and scaling number can be calculated from that value."),(0,n.kt)("p",null,"picture of resistor in link below\nit may be in a different place but should be around there\n",(0,n.kt)("a",{parentName:"p",href:"https://static.rcgroups.net/forums/attachments/5/9/3/2/6/3/a9650746-128-EDB2C10E-33D3-40BA-988A-6029EA696B4F.jpg"},"https://static.rcgroups.net/forums/attachments/5/9/3/2/6/3/a9650746-128-EDB2C10E-33D3-40BA-988A-6029EA696B4F.jpg")),(0,n.kt)("p",null,"here is the procedure for calculating the value\n",(0,n.kt)("a",{parentName:"p",href:"https://www.rcgroups.com/forums/showthread.php?2798055-Understanding-Current-Meters"},"https://www.rcgroups.com/forums/showthread.php?2798055-Understanding-Current-Meters")),(0,n.kt)("h3",{id:"driver-related-problems"},"Driver related problems"),(0,n.kt)("p",null,"Some people have been complaining about computer(windows pc's) not being able to see the board.\nIn boot loader mode, the default STM USB-dfu driver needs to be replaced with the generic WinUSB driver the Firmware Flasher in configurator can use. Zadig or IRCDF does this job for you.\nZadig ",(0,n.kt)("a",{parentName:"p",href:"http://zadig.akeo.ie/"},"http://zadig.akeo.ie/"),"\nimpulserc driver fixer ",(0,n.kt)("a",{parentName:"p",href:"https://impulserc.blob.core.windows.net/utilities/ImpulseRC_Driver_Fixer.exe"},"https://impulserc.blob.core.windows.net/utilities/ImpulseRC_Driver_Fixer.exe")," (link to official irc site)\nIn normal mode, the STM VCP driver needs to be installed. ",(0,n.kt)("a",{parentName:"p",href:"http://www.st.com/en/development-tools/stsw-stm32102.html"},"http://www.st.com/en/development-tools/stsw-stm32102.html")),(0,n.kt)("p",null,"This is in no way special or specific for this board. All FC's with a STM USB-VCP port behave like this. Read Installing-Betaflight"),(0,n.kt)("h3",{id:"remapping-for-motors"},"remapping for motors"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"http://i.imgur.com/Mh41SmG.jpg"},"http://i.imgur.com/Mh41SmG.jpg")),(0,n.kt)("h2",{id:"setup-guide"},"Setup Guide:"),(0,n.kt)("p",null,"Example:\nTramp HV or Unify Pro HV:\nTelemitry to UART 3 TX pin\nVideo to video out\nPower from VBAT and AGND"),(0,n.kt)("p",null,"Camera:\nVideo to video in\npower from VBAT and AGND"),(0,n.kt)("p",null,"X4R-SB:\nSmartport telemitry to UART 1 TX pin\nSBUS to UART 2\nPower from 5v rail"),(0,n.kt)("p",null,"Rcgroups Thread: ",(0,n.kt)("a",{parentName:"p",href:"https://www.rcgroups.com/forums/showthread.php?2795213-NEW-Betaflight-F3-Flight-Controller-OSD-PDB-SD-card-BEC-current-sensor"},"https://www.rcgroups.com/forums/showthread.php?2795213-NEW-Betaflight-F3-Flight-Controller-OSD-PDB-SD-card-BEC-current-sensor")),(0,n.kt)("p",null,"Probably the first video about the BFF3: ",(0,n.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=kr16b45Lhw4"},"https://www.youtube.com/watch?v=kr16b45Lhw4")),(0,n.kt)("p",null,"helpful for someone who is starting a build with the Betaflight F3 FC...(Note: this is a ARMATTAN CHAMELEON Build using the BFF3 FC). ",(0,n.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=wmbRVg3stoE"},"https://www.youtube.com/watch?v=wmbRVg3stoE")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://www.rcgroups.com/forums/showthread.php?2795213-NEW-Betaflight-F3-Flight-Controller-OSD-PDB-SD-card-BEC-current-sensor"},"https://www.rcgroups.com/forums/showthread.php?2795213-NEW-Betaflight-F3-Flight-Controller-OSD-PDB-SD-card-BEC-current-sensor")),(0,n.kt)("h2",{id:"image"},"Image"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"http://www.fpvmodel.com/-pre-order-betaflight-f3-flight-controller_g1231.html"},"http://www.fpvmodel.com/-pre-order-betaflight-f3-flight-controller_g1231.html")))}d.isMDXComponent=!0}}]);