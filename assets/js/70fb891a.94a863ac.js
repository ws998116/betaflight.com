"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8877],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>f});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=i.createContext({}),d=function(e){var t=i.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=d(e.components);return i.createElement(u.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=d(n),c=r,f=p["".concat(u,".").concat(c)]||p[c]||g[c]||a;return n?i.createElement(f,o(o({ref:t},s),{},{components:n})):i.createElement(f,o({ref:t},s))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=c;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var d=2;d<a;d++)o[d]=n[d];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},83095:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var i=n(87462),r=(n(67294),n(3905));const a={},o="Building in Ubuntu",l={unversionedId:"development/Building-in-Ubuntu",id:"development/Building-in-Ubuntu",title:"Building in Ubuntu",description:"Building for Ubuntu platform is remarkably easy.",source:"@site/docs/development/Building-in-Ubuntu.md",sourceDirName:"development",slug:"/development/Building-in-Ubuntu",permalink:"/docs/development/Building-in-Ubuntu",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"development",previous:{title:"Building in Mac OS X",permalink:"/docs/development/Building-in-Mac-OSX"},next:{title:"Building in Windows",permalink:"/docs/development/Building-in-Windows"}},u={},d=[{value:"Clone Betaflight Repository and Install Toolchain",id:"clone-betaflight-repository-and-install-toolchain",level:3},{value:"Updating and Rebuilding Firmware",id:"updating-and-rebuilding-firmware",level:3},{value:"Building Betaflight Configurator",id:"building-betaflight-configurator",level:3},{value:"Flashing a Target with Betaflight Configurator",id:"flashing-a-target-with-betaflight-configurator",level:3}],s={toc:d};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"building-in-ubuntu"},"Building in Ubuntu"),(0,r.kt)("p",null,"Building for Ubuntu platform is remarkably easy.\nThis document is tested and based on the latest Ubuntu 22.04 LTS release and can also be used for WSL."),(0,r.kt)("h3",{id:"clone-betaflight-repository-and-install-toolchain"},"Clone Betaflight Repository and Install Toolchain"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ sudo apt update && sudo apt upgrade\n$ sudo apt install build-essential libblocksruntime-dev libtool git curl clang-12\n$ git clone https://github.com/betaflight/betaflight.git\n$ cd betaflight\n$ make arm_sdk_install\n$ make configs\n")),(0,r.kt)("h3",{id:"updating-and-rebuilding-firmware"},"Updating and Rebuilding Firmware"),(0,r.kt)("p",null,"Navigate to your local betaflight repository and use the following steps to pull the latest changes and rebuild your version of betaflight:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'$ git pull\n$ make MATEKF405 [EXTRA_FLAGS="-DUSE_RANGEFINDER"] [DEBUG=DBG]\n')),(0,r.kt)("p",null,"Using the optional EXTRA_FLAGS parameters you can specify options like USE_RANGEFINDER.\nUsing the optional DEBUG parameter you can specify the debugger."),(0,r.kt)("p",null,"You'll see a set of files being compiled, and finally linked, yielding both an ELF and then a HEX.\nYou can use the Betaflight-Configurator to flash the ",(0,r.kt)("inlineCode",{parentName:"p"},"obj/betaflight_MATEKF405.hex")," file.\nMake sure to remove ",(0,r.kt)("inlineCode",{parentName:"p"},"obj/")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"make clean"),", before building again."),(0,r.kt)("h3",{id:"building-betaflight-configurator"},"Building Betaflight Configurator"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ sudo apt update && sudo apt upgrade\n$ sudo apt install libatomic1 npm\n$ sudo npm install -g gulp-cli yarn\n$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash\n$ source ~/.bashrc\n$ nvm install 16 (for exact version please check link below)\n")),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/betaflight/betaflight-configurator#development"},"Betaflight Configurator Development")," for how to build the Betaflight Configurator."),(0,r.kt)("h3",{id:"flashing-a-target-with-betaflight-configurator"},"Flashing a Target with Betaflight Configurator"),(0,r.kt)("p",null,"In most Linux distributions the user won't have access to serial interfaces by default. Flashing a target requires configuration of usb for dfu mode. To add this access right type the following command in a terminal:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    $ sudo usermod -a -G dialout $USER\n    $ sudo usermod -a -G plugdev $USER\n    $ sudo apt-get remove modemmanager\n    $ sudo tee -a /etc/udev/rules.d/46-stdfu-permissions.rules <<EOF\n# DFU (Internal bootloader for STM32 and AT32 MCUs)\n\nACTION=="add", SUBSYSTEM=="usb", ATTRS{idVendor}=="0483", ATTRS{idProduct}=="df11", MODE="0664", GROUP="plugdev"\nACTION=="add", SUBSYSTEM=="usb", ATTRS{idVendor}=="2e3c", ATTRS{idProduct}=="df11", MODE="0664", GROUP="plugdev"EOF\nEOF\n')),(0,r.kt)("p",null,"Please log out and log in to active the settings. You should now be able to flash your target using Betaflight Configurator."),(0,r.kt)("p",null,"Credit goes to K.C. Budd, AKfreak for testing, and pulsar for doing the long legwork that yielded the original content of this document."))}p.isMDXComponent=!0}}]);